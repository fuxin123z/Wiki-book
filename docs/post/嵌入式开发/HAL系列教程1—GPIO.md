# HAL 系列教程 1 — GPIO

这是 HAL 系列教程的第一篇。本教程面对的是机器人班的同学们，我希望这个系类的风格是浅显易懂，而又不过多事无巨细的赘述的。市面上 HAL 的中文教程并不多，其中硬石的教程写得比较不错，本系列将参考这本书，为大家详细展开讲解。如果你觉得我写的教程太浅了，也可以直接阅读硬石的教程。废话不多说，咱就从 GPIO 这个最基本的东西开始吧。

## GPIO 基础知识

GPIO 是什么？  
其实就是 General Purpose Input Output 的缩写，即通用输入输出。有多通用？咱拿出一片单片机芯片（可以是 STM32，也可以是其他各式各样的）看看，**除了电源及功能引脚（图中有颜色的），其它的引脚都称为 GPIO**：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20200615205256.jpg)

GPIO 可以干嘛？  
看名字，Input / Output 说明它既可以输入信号，也可以输出信号。输入输出的信号都是什么？模电和数电里我们学过，可以是数字信号，也可以是模拟信号：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20200615210739.jpg)

我们再来看看 GPIO 内部的结构：

![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20200615211744.jpg)

看起来很复杂是吧。其实并没有想象中那么复杂，咱一部分一部分来分解：

1. 最右边的 `I/O 引脚` ，其实就是实物芯片的引脚。上下的 `保护二极管` 在 **一定程度上** 防止外部不正常电压通过引脚烧毁芯片（不防熊孩子行为）
2. 红色虚线框内是输入功能（芯片读取外部信号）。两个带开关的上拉 / 下拉电阻，用来实现 **上拉 / 下拉输入功能**。**如果两个开关都不闭合，我们则称其为浮空输入**（上不顶天下不着地，没有参考电平）。这三种输入模式读取的都是数字量（高 / 低电平）。还有模拟输入功能，顾名思义就是直接读取引脚上的模拟量。（复用功能输入我们后面再提及）
3. 蓝色虚线框内是输出功能，